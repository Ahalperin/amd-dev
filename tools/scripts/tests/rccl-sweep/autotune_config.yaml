# RCCL Auto-Tuner Configuration
# ================================
#
# This file configures the automated RCCL tuning pipeline.
# Usage: python rccl_autotune.py --config autotune_config.yaml
#

# Initial Sweep Settings
# ----------------------
# These settings control the broad sweep phase that explores
# the configuration space.
sweep:
  # Node range to sweep (e.g., "1-2", "1-4", "2")
  nodes: "1-2"
  
  # Channel sweep range in format START:END:STEP
  channels: "32:256:32"
  
  # Collectives to tune (with or without _perf suffix)
  collectives:
    - all_reduce
    - all_gather
  
  # Algorithms to sweep
  algos:
    - RING
    - TREE
  
  # Protocols to sweep
  protos:
    - SIMPLE
  
  # Message size range
  min_size: "1M"
  max_size: "512M"

# Hotspot Detection Settings
# --------------------------
# These settings control how performance drops (hotspots) are
# detected and prioritized for targeted sweeps.
hotspot:
  # Drop threshold as decimal (0.10 = 10% drop triggers hotspot)
  threshold: 0.10
  
  # Minimum absolute bandwidth drop in GB/s to consider
  # (helps filter noise in low-bandwidth regions)
  min_drop_gbps: 0.0
  
  # Maximum refinement iterations
  # Each iteration detects hotspots and runs targeted sweeps
  max_iterations: 3

# Output Settings
# ---------------
# Configure where results and generated files are stored.
output:
  # Base output directory for all results
  dir: "./sweep_results"
  
  # Generated tuner configuration file
  # (relative to output.dir if not absolute)
  tuner_conf: "generated_tuner.conf"
  
  # Tuning report CSV
  # (relative to output.dir if not absolute)
  report_csv: "tuning_report.csv"

# Advanced Settings (Optional)
# ----------------------------
# Uncomment and modify these for advanced use cases.

# Maximum hotspots to address per iteration
# (prioritizes highest-impact hotspots)
# max_hotspots_per_iteration: 10

# Tolerance percentage for "best" config selection
# (5.0 means configs within 5% of best time are considered equivalent,
#  then the one with minimum channels is selected)
# optimization_tolerance_pct: 5.0

# Server configuration file
# servers_file: "./servers.txt"

